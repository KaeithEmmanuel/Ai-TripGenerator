import {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} from "@google/generative-ai";

const apiKey = process.env.GEMINI_API_KEY;// Replace with your environment variable
const genAI = new GoogleGenerativeAI(apiKey);
const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {text: "Generate Travel Plan for Location: Georgia Tech, Atlanta, GA, USA,for 5 Days and 4 Nights for A Couple with a Luxury budget ,with a Flight details, Flight Price with Booking url, Hotels options list with HotelName, Hotel address, Price, hotel image url, geo coordinates, rating, descriptions and Places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time  travel each of the location for 5 days and 4 night with each day plan with best time to visit in JSON format.\n"},
      ],
    },
    {
      role: "model",
      parts: [
        {text: "```json\n{\n  \"trip\": {\n    \"destination\": \"Georgia Tech, Atlanta, GA, USA\",\n    \"duration\": \"5 days and 4 nights\",\n    \"budget\": \"Luxury\",\n    \"travelers\": \"Couple\"\n  },\n  \"flight\": {\n    \"details\": \"Round trip flight from [Your Departure City] to Atlanta Hartsfield-Jackson International Airport (ATL)\",\n    \"price\": \"[Enter Approximate Price]\",\n    \"booking_url\": \"https://www.google.com/flights\" // Replace with a specific booking site\n  },\n  \"hotels\": [\n    {\n      \"name\": \"The Ritz-Carlton, Atlanta\",\n      \"address\": \"181 Peachtree Street NE, Atlanta, GA 30303\",\n      \"price\": \"[$350 - $600 per night]\",\n      \"image_url\": \"https://www.ritzcarlton.com/en/hotels/atlanta/images/hotel-gallery/hero-image-mobile.jpg\",\n      \"geo_coordinates\": \"33.7577, -84.3874\",\n      \"rating\": \"4.5\",\n      \"description\": \"Luxury hotel in the heart of downtown Atlanta, offering stunning city views, elegant rooms, and exceptional dining experiences.\",\n      \"nearby_places\": [\n        {\n          \"name\": \"Georgia Aquarium\",\n          \"details\": \"World-class aquarium showcasing diverse marine life.\",\n          \"image_url\": \"https://www.georgiaaquarium.org/media/4972/aquarium-exterior-wide-shot-041319-1.jpg?anchor=center&mode=crop&width=1200&height=675&rnd=133026164330000000\",\n          \"geo_coordinates\": \"33.7586, -84.3878\",\n          \"ticket_pricing\": \"$39.99 - $49.99 per adult\",\n          \"time_to_spend\": \"2-3 hours\"\n        },\n        {\n          \"name\": \"World of Coca-Cola\",\n          \"details\": \"Interactive museum dedicated to the history and production of Coca-Cola.\",\n          \"image_url\": \"https://www.worldofcoca-cola.com/content/dam/wocc/en/images/home/hero-desktop-2.jpg\",\n          \"geo_coordinates\": \"33.7581, -84.3903\",\n          \"ticket_pricing\": \"$20 - $30 per adult\",\n          \"time_to_spend\": \"1-2 hours\"\n        }\n      ]\n    },\n    {\n      \"name\": \"The St. Regis Atlanta\",\n      \"address\": \"88 West Peachtree Street NW, Atlanta, GA 30303\",\n      \"price\": \"[$400 - $700 per night]\",\n      \"image_url\": \"https://media.stregis.com/is/image/marriott/atlanta-st-regis-hotel-exterior?wid=1024&hei=576&qlt=75&resMode=sharp2&op_sharpen=0&op_usm=0.8,0.02,0,0&iccEmbed=true\",\n      \"geo_coordinates\": \"33.7576, -84.3891\",\n      \"rating\": \"4.6\",\n      \"description\": \"Sophisticated hotel with luxurious accommodations, fine dining, and a prime location in downtown Atlanta.\",\n      \"nearby_places\": [\n        {\n          \"name\": \"Centennial Olympic Park\",\n          \"details\": \"Public park commemorating the 1996 Summer Olympics, featuring fountains, sculptures, and events.\",\n          \"image_url\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e2/Centennial_Olympic_Park_in_Atlanta.jpg/1280px-Centennial_Olympic_Park_in_Atlanta.jpg\",\n          \"geo_coordinates\": \"33.7576, -84.3891\",\n          \"ticket_pricing\": \"Free\",\n          \"time_to_spend\": \"1-2 hours\"\n        },\n        {\n          \"name\": \"CNN Center\",\n          \"details\": \"Headquarters of CNN, offering tours and insights into news broadcasting.\",\n          \"image_url\": \"https://www.cnn.com/style/img/dynamic/2020/09/18/cnn-center-atlanta-tours/cnn-center-tours-atlanta-exterior-00001-super-169.jpg\",\n          \"geo_coordinates\": \"33.7599, -84.3903\",\n          \"ticket_pricing\": \"Varies by tour type\",\n          \"time_to_spend\": \"1-2 hours\"\n        }\n      ]\n    },\n    {\n      \"name\": \"Four Seasons Hotel Atlanta\",\n      \"address\": \"75 14th Street NW, Atlanta, GA 30309\",\n      \"price\": \"[$450 - $800 per night]\",\n      \"image_url\": \"https://media.fourseasons.com/is/image/fourseasons/ATLANTA_HERO_650x433?$FS-HomepageSlider$\",\n      \"geo_coordinates\": \"33.7612, -84.3861\",\n      \"rating\": \"4.7\",\n      \"description\": \"Elegant hotel with a rooftop pool, award-winning dining, and a prime location in Midtown.\",\n      \"nearby_places\": [\n        {\n          \"name\": \"High Museum of Art\",\n          \"details\": \"Art museum featuring a diverse collection of paintings, sculptures, and more.\",\n          \"image_url\": \"https://www.high.org/sites/default/files/styles/social_share_large/public/2023-09/High_Museum_Exterior_Day_2015.jpg?itok=r-bL3a_l\",\n          \"geo_coordinates\": \"33.7612, -84.3861\",\n          \"ticket_pricing\": \"$25 - $30 per adult\",\n          \"time_to_spend\": \"2-3 hours\"\n        },\n        {\n          \"name\": \"Atlanta Botanical Garden\",\n          \"details\": \"Beautiful garden with diverse plant collections, exhibitions, and events.\",\n          \"image_url\": \"https://www.atlantabotanicalgarden.org/sites/default/files/styles/full_width/public/media/2020/11/20201104_atlantabotanicalgarden_aerial_0020.jpg?h=421&itok=J3yN238V\",\n          \"geo_coordinates\": \"33.7738, -84.3864\",\n          \"ticket_pricing\": \"$25 - $30 per adult\",\n          \"time_to_spend\": \"2-3 hours\"\n        }\n      ]\n    }\n  ],\n  \"itinerary\": [\n    {\n      \"day\": \"Day 1: Arrival and Downtown Exploration\",\n      \"activities\": [\n        {\n          \"time\": \"11:00 AM\",\n          \"activity\": \"Check into your luxury hotel in downtown Atlanta.\",\n          \"location\": \"[Your chosen hotel]\"\n        },\n        {\n          \"time\": \"12:00 PM\",\n          \"activity\": \"Lunch at The Capital Grille, known for its upscale steakhouse experience.\",\n          \"location\": \"33 Peachtree St NE, Atlanta, GA 30303\"\n        },\n        {\n          \"time\": \"2:00 PM\",\n          \"activity\": \"Visit the Georgia Aquarium, one of the world's largest aquariums.\",\n          \"location\": \"225 Baker St NW, Atlanta, GA 30313\"\n        },\n        {\n          \"time\": \"5:00 PM\",\n          \"activity\": \"Take a stroll through Centennial Olympic Park and enjoy the city views.\",\n          \"location\": \"250 Marietta St NW, Atlanta, GA 30313\"\n        },\n        {\n          \"time\": \"7:00 PM\",\n          \"activity\": \"Dine at South City Kitchen, a popular Southern restaurant with a modern twist.\",\n          \"location\": \"1180 Peachtree St NE, Atlanta, GA 30309\"\n        }\n      ]\n    },\n    {\n      \"day\": \"Day 2: Midtown and Art\",\n      \"activities\": [\n        {\n          \"time\": \"10:00 AM\",\n          \"activity\": \"Start your day with a delicious breakfast at The Iberian Pig, a Spanish-inspired restaurant.\",\n          \"location\": \"300 E. Ponce de Leon Ave, Atlanta, GA 30308\"\n        },\n        {\n          \"time\": \"11:30 AM\",\n          \"activity\": \"Explore the High Museum of Art, featuring a diverse collection of art from around the world.\",\n          \"location\": \"1280 Peachtree St NE, Atlanta, GA 30309\"\n        },\n        {\n          \"time\": \"2:00 PM\",\n          \"activity\": \"Relax and enjoy lunch at The Roof at Ponce City Market, offering panoramic views of the city.\",\n          \"location\": \"675 Ponce de Leon Ave NE, Atlanta, GA 30308\"\n        },\n        {\n          \"time\": \"3:30 PM\",\n          \"activity\": \"Visit the Atlanta Botanical Garden, a beautiful oasis in the heart of the city.\",\n          \"location\": \"1345 Piedmont Ave NE, Atlanta, GA 30309\"\n        },\n        {\n          \"time\": \"6:00 PM\",\n          \"activity\": \"Experience an elegant dinner at Canoe, a restaurant known for its riverfront views and innovative cuisine.\",\n          \"location\": \"4199 Paces Ferry Rd NW, Atlanta, GA 30327\"\n        }\n      ]\n    },\n    {\n      \"day\": \"Day 3: Georgia Tech and History\",\n      \"activities\": [\n        {\n          \"time\": \"10:00 AM\",\n          \"activity\": \"Explore the Georgia Tech campus, home to a vibrant student community and innovative research facilities.\",\n          \"location\": \"225 North Ave NW, Atlanta, GA 30332\"\n        },\n        {\n          \"time\": \"12:00 PM\",\n          \"activity\": \"Enjoy a casual lunch at a cafe near campus.\",\n          \"location\": \"Near Georgia Tech campus\"\n        },\n        {\n          \"time\": \"1:30 PM\",\n          \"activity\": \"Visit the Martin Luther King Jr. National Historical Park, a significant site for civil rights history.\",\n          \"location\": \"450 Auburn Ave NE, Atlanta, GA 30312\"\n        },\n        {\n          \"time\": \"3:30 PM\",\n          \"activity\": \"Explore the Atlanta History Center, showcasing the city's rich past.\",\n          \"location\": \"130 West Paces Ferry Rd NW, Atlanta, GA 30305\"\n        },\n        {\n          \"time\": \"6:00 PM\",\n          \"activity\": \"Dine at The Optimist, a seafood-focused restaurant with a lively atmosphere.\",\n          \"location\": \"914 Howell Mill Rd NW, Atlanta, GA 30318\"\n        }\n      ]\n    },\n    {\n      \"day\": \"Day 4: Shopping and Entertainment\",\n      \"activities\": [\n        {\n          \"time\": \"10:00 AM\",\n          \"activity\": \"Indulge in a luxurious brunch at The Ritz-Carlton, Atlanta.\",\n          \"location\": \"181 Peachtree Street NE, Atlanta, GA 30303\"\n        },\n        {\n          \"time\": \"11:30 AM\",\n          \"activity\": \"Shop for designer brands at Lenox Square, Atlanta's premier shopping mall.\",\n          \"location\": \"3393 Peachtree Rd NE, Atlanta, GA 30326\"\n        },\n        {\n          \"time\": \"2:00 PM\",\n          \"activity\": \"Enjoy lunch at one of the many restaurants at Lenox Square.\",\n          \"location\": \"Lenox Square\"\n        },\n        {\n          \"time\": \"3:30 PM\",\n          \"activity\": \"Catch a show at the Fox Theatre, a magnificent historic theater.\",\n          \"location\": \"660 Peachtree St NE, Atlanta, GA 30308\"\n        },\n        {\n          \"time\": \"7:00 PM\",\n          \"activity\": \"Dine at a trendy restaurant in the Westside Provisions District, known for its diverse culinary scene.\",\n          \"location\": \"Westside Provisions District, Atlanta, GA 30310\"\n        }\n      ]\n    },\n    {\n      \"day\": \"Day 5: Departure\",\n      \"activities\": [\n        {\n          \"time\": \"9:00 AM\",\n          \"activity\": \"Enjoy a leisurely breakfast at your hotel.\",\n          \"location\": \"[Your chosen hotel]\"\n        },\n        {\n          \"time\": \"10:30 AM\",\n          \"activity\": \"Check out of your hotel.\",\n          \"location\": \"[Your chosen hotel]\"\n        },\n        {\n          \"time\": \"11:00 AM\",\n          \"activity\": \"Head to the airport for your flight home.\",\n          \"location\": \"Atlanta Hartsfield-Jackson International Airport (ATL)\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Explanation of the JSON Structure:**\n\n* **trip**: Contains general information about the trip, including destination, duration, budget, and travelers.\n* **flight**: Details the flight, including the departure and arrival cities, approximate price, and a URL for booking.\n* **hotels**: A list of hotel options with relevant information:\n    * **name**: Hotel name\n    * **address**: Hotel address\n    * **price**: Approximate price range per night\n    * **image_url**: URL of the hotel image\n    * **geo_coordinates**: Latitude and longitude for location\n    * **rating**: Star rating\n    * **description**: Brief description of the hotel\n    * **nearby_places**: List of nearby attractions with information:\n        * **name**: Attraction name\n        * **details**: Brief description\n        * **image_url**: URL of the attraction image\n        * **geo_coordinates**: Latitude and longitude for location\n        * **ticket_pricing**: Approximate ticket prices\n        * **time_to_spend**: Suggested time to spend at the attraction\n* **itinerary**: A detailed itinerary for each day of the trip:\n    * **day**: Name of the day\n    * **activities**: List of activities for the day with information:\n        * **time**: Approximate time of the activity\n        * **activity**: Description of the activity\n        * **location**: Location of the activity\n\n**Note:** This JSON format provides a framework for a travel plan. You need to:\n\n* Replace placeholders like \"[Your Departure City]\" and \"[Enter Approximate Price]\" with specific information.\n* Provide actual URLs for flight booking, hotel images, and attraction images.\n* Adapt the itinerary to your preferences and interests.\n* Research and add more details to each activity and place, such as contact information, opening hours, and special considerations.\n\nThis JSON format can be easily parsed and used in various applications, such as travel planning websites, mobile apps, or even a simple script to generate a formatted itinerary.\n"},
      ],
    },
  ],
});